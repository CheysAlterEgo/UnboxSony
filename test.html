<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Soyul's Secret Notes</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: #fff8f0;
      padding: 40px;
      color: #4b3b2b;
      text-align: center;
      position: relative;
    }

    h1 {
      font-size: 36px;
      margin-bottom: 20px;
      color: #ff6b81;
    }

    .difficulty-buttons button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background: #ffcad4;
      border: none;
      color: #4b3b2b;
      border-radius: 10px;
      transition: background 0.3s ease;
    }

    .difficulty-buttons button:hover {
      background: #ffe5ec;
    }

    #cryptogram,
    #result,
    #key-panel {
      display: none; /* Hidden initially */
    }

    .letter-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: appear 0.3s ease-in-out forwards;
      opacity: 0;
    }

    .letter-box:nth-child(n) {
      animation-delay: calc(0.05s * var(--i));
    }

    .letter-box input {
      width: 40px;
      height: 40px;
      text-align: center;
      font-size: 20px;
      text-transform: uppercase;
      border: 2px solid #ccc;
      border-radius: 8px;
      background: #fffdfd;
      color: #4b3b2b;
    }

    .cipher {
      font-size: 12px;
      margin-top: 4px;
      color: #a88;
    }

    #result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 20px;
      color: #2ecc71;
    }

    #key-panel {
      margin-top: 50px;
    }

    #key-panel h2 {
      margin-bottom: 10px;
      color: #ff6b81;
    }

    .key-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 700px;
      margin: 0 auto;
    }

    .key-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 4px;
    }

    .key-box input {
      width: 40px;
      height: 40px;
      text-align: center;
      font-size: 16px;
      border-radius: 6px;
      text-transform: uppercase;
    }

    .key-label {
      font-size: 12px;
      color: #999;
      margin-top: 3px;
    }

    @keyframes appear {
      to {
        opacity: 1;
        transform: translateY(0);
      }
      from {
        opacity: 0;
        transform: translateY(10px);
      }
    }

    #writingAnimation {
      position: fixed;
      bottom: 10px;
      right: 10px;
      width: 200px;
      border-radius: 10px;
      display: none; /* Hidden by default */
      pointer-events: none; /* Don't let user interact with it */
    }
  </style>
</head>
<body>

  <h1>üìù Soyul's Secret Notes</h1>

  <div class="difficulty-buttons">
    <button onclick="playWithAnimation('easy')">Easy</button>
    <button onclick="playWithAnimation('medium')">Medium</button>
    <button onclick="playWithAnimation('hard')">Hard</button>
    <button onclick="playWithAnimation('extreme')">Extreme</button>
  </div>

  <!-- üîΩ Video will play here when triggered -->
  <video id="writingAnimation" src="soyulwriting.MOV" muted></video>

  <div id="cryptogram"></div>
  <div id="result"></div>

  <div id="key-panel">
    <h2>Letter Tester Key</h2>
    <div class="key-row" id="key-row"></div>
  </div>

  <script>
    const sentences = {
  easy: [
    "STOP LOOKING AT THIS NOTE",
    "VEX IS SCARY BUT CUTE DONT TELL HER I SAID THAT",
    "YUNSU THINKS HES MY DAD LOL OKAY",
    "KAIRO IS MY EMOTIONAL SUPPORT DAD",
    "YUMIKO UNSTABLE BUT LIKE FUN",
    "IM NOT DRAMATIC YOU JUST CANT HANDLE MY ENERGY",
    "I TOLD YUNSU TO GO TOUCH GRASS HE DIDNT GET IT",
    "KAIRO IS LITERALLY MY FAVORITE PERSON FIGHT ME",
    "VEX BLINKED AND I FLINCHED INSTINCT",
    "I DONT HAVE ATTITUDE I HAVE STANDARDS",
    "YUNSU KIDNAPPED ME AND EXPECTED GRATITUDE",
    "IF VEX LOOKS AT YOU RUN TRUST ME",
    "YUMIKO TALKS TO HER KNIVES THATS REAL",
    "I TOLD YUNSU HE WAS GIVING WEIRD UNCLE ENERGY",
    "KAIRO IS DAD CODED I SAID WHAT I SAID",
    "VEX HAS VILLAIN ENERGY AND NO REMORSE",
    "YUMIKO IS CHAOS IN HUMAN FORM",
    "I SURVIVED YUNSUS NONSENSE I DESERVE CAKE",
    "VEX ONCE SMILED AND IT GAVE ME NIGHTMARES",
    "I MAY BE SMALL BUT MY COMEBACKS HIT",
    "YUNSU TALKS TOO MUCH I STOPPED LISTENING",
    "KAIRO IS THE ONLY ADULT WITH BRAIN CELLS",
    "VEX DOESNT THREATEN PEOPLE SHE JUST STARES",
    "YUMIKO I LOVE HER BUT FROM A DISTANCE",
    "I TOLD THE TRUTH AND NOW YUNSUS MAD BOOHOO",
    "YUNSU KEEPS ACTING LIKE A PARENT THATS COMEDY GOLD",
    "VEX SCARES ME BUT IN A COOL OLDER SISTER WAY",
    "YUMIKO SAYS SHES FINE THATS CODE FOR DUCK",
    "KAIRO DESERVES A RAISE HE DOESNT EVEN GET PAID",
    "YUNSU GROUNDED ME ONCE I LAUGHED IN HIS FACE",
    "VEX COULD BLINK AND START A WAR ICONIC BEHAVIOR"
  ],
  medium: [
    "I TOLD YOU NOT TO OPEN THIS",
    "I AM DEFINITELY NOT HIDING ANYTHING",
    "YOU CANT PROVE ANYTHING OKAY",
    "YUMIKO STABBED A WALL BECAUSE IT LOOKED AT HER WEIRD",
    "I ONCE TOLD VEX SHE NEEDED THERAPY BOLD MOVE",
    "YUNSU SAYS I LOVE YOU I SAY THERAPY",
    "YUMIKO LOVES CHAOS IM HER UNPAID INTERN",
    "I DESERVE PEACE SNACKS AND A NAP",
    "VEX DOESNT NEED TO FIGHT HER GLARE DOES IT",
    "YUNSU TRIED TO LECTURE ME I FELL ASLEEP",
    "VEX ONCE PATTED MY HEAD I DIDNT SLEEP FOR DAYS",
    "I TOLD YUNSU HES THE VILLAIN IN MY MEMOIR",
    "YUMIKO IS A WALKING HAZARD WITH GOOD EYELINER",
    "VEX IS THE REASON DONT MESS WITH HER EXISTS",
    "YUNSU NEEDS A TIMEOUT FOR LIKE FOREVER",
    "YUMIKO IS PRETTY AND TERRIFYING I ASPIRE",
    "YUNSU THINKS KIDNAPPING BUILDS BONDS BOLD ASSUMPTION",
    "YUMIKO SAID TRUST ME I RAN",
    "VEX DOESNT RAISE HER VOICE SHE LOWERS YOURS",
    "YUNSU KEEPS ACTING LIKE A PARENT THATS COMEDY GOLD",
    "VEX SCARES ME BUT IN A COOL OLDER SISTER WAY",
    "YUMIKO SAYS SHES FINE THATS CODE FOR DUCK",
    "KAIRO DESERVES A RAISE HE DOESNT EVEN GET PAID",
    "YUNSU GROUNDED ME ONCE I LAUGHED IN HIS FACE",
    "VEX COULD BLINK AND START A WAR ICONIC BEHAVIOR",
    "YUMIKO STABBED A WALL BECAUSE IT LOOKED AT HER WEIRD",
    "I ONCE TOLD VEX SHE NEEDED THERAPY BOLD MOVE",
    "YUNSU SAYS I LOVE YOU I SAY THERAPY",
    "YUMIKO LOVES CHAOS IM HER UNPAID INTERN",
    "I DESERVE PEACE SNACKS AND A NAP",
    "VEX DOESNT NEED TO FIGHT HER GLARE DOES IT",
    "YUNSU TRIED TO LECTURE ME I FELL ASLEEP",
    "VEX ONCE PATTED MY HEAD I DIDNT SLEEP FOR DAYS",
    "I TOLD YUNSU HES THE VILLAIN IN MY MEMOIR"
  ],
  hard: [
    "I MAY HAVE BORROWED YOUR JOURNAL FOR RESEARCH PURPOSES",
    "THIS NOTE WILL SELF DESTRUCT IN LIKE FORTY YEARS",
    "I TOLD YUNSU HE COULDNT PARENT A GOLDFISH LET ALONE ME",
    "VEX DOESNT YELL HER SILENCE IS LOUDER THAN BOMBS",
    "YUMIKO ONCE MADE EYE CONTACT WITH A DEMON AND WON",
    "KAIRO HAS DAD ENERGY WITHOUT THE EMOTIONAL UNAVAILABILITY",
    "YUNSU TRIED TO GROUND ME I GROUNDED HIM EMOTIONALLY",
    "VEX WALKS LIKE SHE OWNS THE WORLD HONESTLY MAYBE SHE DOES",
    "YUMIKO ONCE SAID OOPS THAT WAS THE SCARIEST PART",
    "KAIRO HAS NO IDEA HOW MUCH I LOVE HIM NONE",
    "I TOLD YUNSU HES ONE PLOT TWIST FROM IRRELEVANCE",
    "VEX TOLD ME TO BE QUIET AND I EVAPORATED",
    "YUMIKOS IDEA OF THERAPY IS THROWING KNIVES ROMANTIC",
    "VEX SMILED AT ME I THOUGHT THE WORLD WAS ENDING",
    "YUMIKO BLINKED AND THE LIGHTS WENT OUT COINCIDENCE",
    "I TOLD YUNSU HE FLUNKED FATHERHOOD 101",
    "VEX ONCE MADE A ROOM GO SILENT JUST BY WALKING IN",
    "YUMIKOS OOPS HAS A DEATH COUNT",
    "YUNSUS WHOLE VIBE SCREAMS MIDLIFE CRISIS BUT EVIL",
    "YUMIKO ONCE COOKED THE KITCHEN HAS NEVER RECOVERED",
    "I TOLD YUNSU TO GET A PERSONALITY HE GOT OFFENDED",
    "VEX ONCE SAID PLEASE THATS WHEN I KNEW I MESSED UP",
    "YUMIKO HAS A KNIFE FOR EVERY EMOTION GIRL MATH",
    "YUNSU DESERVES A VILLAIN ORIGIN STORY DOCUMENTARY",
    "I TOLD YUNSU HE COULDNT PARENT A GOLDFISH LET ALONE ME",
    "VEX DOESNT YELL HER SILENCE IS LOUDER THAN BOMBS",
    "YUMIKO ONCE MADE EYE CONTACT WITH A DEMON AND WON",
    "KAIRO HAS DAD ENERGY WITHOUT THE EMOTIONAL UNAVAILABILITY",
    "YUNSU TRIED TO GROUND ME I GROUNDED HIM EMOTIONALLY",
    "VEX WALKS LIKE SHE OWNS THE WORLD HONESTLY MAYBE SHE DOES",
    "YUMIKO ONCE SAID OOPS THAT WAS THE SCARIEST PART",
    "KAIRO HAS NO IDEA HOW MUCH I LOVE HIM NONE"
  ],
  extreme: [
    "IM NOT SAYING I TOOK IT BUT LETS JUST SAY IT ISNT YOURS ANYMORE",
    "IF THIS MESSAGE MAKES NO SENSE ITS BECAUSE YOU CANT HANDLE MY GENIUS",
    "VEX SMILED POLITELY AND FIVE PEOPLE DEVELOPED TRAUMA INCLUDING ME",
    "YUNSU ONCE SAID I CARE I CHECKED THE SKY FOR PIGS",
    "YUMIKO HUGGED ME ONCE I THOUGHT I HALLUCINATED",
    "KAIRO IS LITERALLY THE DAD I MANIFESTED WITH TRAUMA",
    "I TOLD YUNSU HE NEEDED A LOBOTOMY HE CALLED IT RUDE",
    "VEX DOESNT ARGUE SHE WINS IN SILENCE",
    "YUMIKO ONCE ADOPTED A PET SCORPION IT RAN AWAY",
    "I GAVE YUNSU A COMPLIMENT HE LOOKED SUSPICIOUS",
    "VEX ONCE GAVE ME ADVICE I CRIED FOR SIX HOURS",
    "KAIRO OFFERED ME SOUP AND I FORGAVE MY ENEMIES",
    "I TOLD YUNSU TO STOP TRAUMA BONDING HE SAID OUCH",
    "VEX IS ALLERGIC TO WEAKNESS AND PROBABLY HAPPINESS",
    "YUMIKOS COOKING TASTES LIKE REVENGE I LIKED IT",
    "VEX DOESNT KNOCK SHE APPEARS",
    "I WROTE YUNSU IS THE PROBLEM IN MY DIARY BOLD",
    "VEX BLINKED AND THE WEATHER CHANGED COINCIDENCE NO",
    "YUMIKO WHISPERED OOPS BEFORE THE EXPLOSION",
    "I TOLD YUNSU ID CALL CPS HE LAUGHED NERVOUSLY",
    "VEX SAID GOOD JOB AND I THOUGHT I WAS HALLUCINATING",
    "YUNSU TAUGHT ME HOW NOT TO RAISE A CHILD",
    "I TOLD YUNSU IM THRIVING ITS A REVENGE ARC",
    "VEX SMILED POLITELY AND FIVE PEOPLE DEVELOPED TRAUMA INCLUDING ME",
    "YUNSU ONCE SAID I CARE I CHECKED THE SKY FOR PIGS",
    "YUMIKO HUGGED ME ONCE I THOUGHT I HALLUCINATED",
    "KAIRO IS LITERALLY THE DAD I MANIFESTED WITH TRAUMA",
    "I TOLD YUNSU HE NEEDED A LOBOTOMY HE CALLED IT RUDE",
    "VEX DOESNT ARGUE SHE WINS IN SILENCE",
    "YUMIKO ONCE ADOPTED A PET SCORPION IT RAN AWAY",
    "I GAVE YUNSU A COMPLIMENT HE LOOKED SUSPICIOUS",
    "VEX ONCE GAVE ME ADVICE I CRIED FOR SIX HOURS",
    "KAIRO OFFERED ME SOUP AND I FORGAVE MY ENEMIES"
  ]
};

    let original = "";
    let encrypted = "";
    let mapping = {};
    let revealed = {};

    const video = document.getElementById("writingAnimation");

    function playWithAnimation(difficulty) {
      // Hide puzzle parts first
      document.getElementById("cryptogram").style.display = "none";
      document.getElementById("result").style.display = "none";
      document.getElementById("key-panel").style.display = "none";

      // Prepare video
      video.style.display = "block";
      video.currentTime = 0;
      video.play();

      // Once the video ends, show the puzzle
      video.onended = () => {
        video.style.display = "none";
        document.getElementById("cryptogram").style.display = "flex";
        document.getElementById("result").style.display = "block";
        document.getElementById("key-panel").style.display = "block";
        startGame(difficulty);
      };
    }

    function getRandomSentence(difficulty) {
      const options = sentences[difficulty];
      return options[Math.floor(Math.random() * options.length)];
    }

    function shuffleAlphabet() {
      const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
      for (let i = alphabet.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [alphabet[i], alphabet[j]] = [alphabet[j], alphabet[i]];
      }
      return alphabet;
    }

    function startGame(difficulty) {
      original = getRandomSentence(difficulty).toUpperCase();
      mapping = {};
      revealed = {};

      const shuffled = shuffleAlphabet();
      const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
      let idx = 0;

      for (let char of alphabet) {
        mapping[char] = shuffled[idx++];
      }

      encrypted = original.split("").map(c => {
        return /[A-Z]/.test(c) ? mapping[c] : c;
      }).join("");

      let revealCount;
      switch (difficulty) {
        case "easy": revealCount = 5; break;
        case "medium": revealCount = 3; break;
        case "hard": revealCount = 2; break;
        case "extreme": revealCount = 0; break;
      }

      const uniqueLetters = [...new Set(original.replace(/[^A-Z]/g, ''))];
      const toReveal = uniqueLetters.sort(() => 0.5 - Math.random()).slice(0, revealCount);
      toReveal.forEach(letter => {
        revealed[mapping[letter]] = letter;
      });

      renderCryptogram();
      renderKeyTester();
    }

    function renderCryptogram() {
      const container = document.getElementById("cryptogram");
      container.innerHTML = "";

      for (let i = 0; i < encrypted.length; i++) {
        const cipherChar = encrypted[i];
        const box = document.createElement("div");
        box.className = "letter-box";
        box.style.setProperty('--i', i);

        if (!/[A-Z]/.test(cipherChar)) {
          box.innerHTML = `<div style="width: 40px; height: 40px; font-size: 24px;">${cipherChar}</div>`;
        } else {
          const input = document.createElement("input");
          input.maxLength = 1;
          input.dataset.index = i;

          if (revealed[cipherChar]) {
            input.value = revealed[cipherChar];
            input.disabled = true;
          }

          input.addEventListener("input", () => checkWin());

          const cipherLabel = document.createElement("div");
          cipherLabel.className = "cipher";
          cipherLabel.textContent = cipherChar;

          box.appendChild(input);
          box.appendChild(cipherLabel);
        }

        container.appendChild(box);
      }
    }

    function checkWin() {
      const inputs = document.querySelectorAll("#cryptogram input");
      let guess = "";

      inputs.forEach((input) => {
        guess += input.value.toUpperCase() || " ";
      });

      const cleanedGuess = guess.replace(/\s+/g, '');
      const cleanedOriginal = original.replace(/\s+/g, '');

      document.getElementById("result").textContent =
        cleanedGuess === cleanedOriginal ? "üéâ You solved Soyul's note!" : "";
    }

    function renderKeyTester() {
      const row = document.getElementById("key-row");
      row.innerHTML = "";

      const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');

      alphabet.forEach(cipherLetter => {
        const box = document.createElement("div");
        box.className = "key-box";

        const input = document.createElement("input");
        input.maxLength = 1;
        input.placeholder = "-";

        const label = document.createElement("div");
        label.className = "key-label";
        label.textContent = cipherLetter;

        input.addEventListener("input", () => {
          const guess = input.value.toUpperCase();
          const correct = Object.keys(mapping).find(k => mapping[k] === cipherLetter);
          if (guess === correct) {
            input.style.backgroundColor = "#aaffaa";
            input.style.color = "#000";
          } else {
            input.style.backgroundColor = "#ffaaaa";
            input.style.color = "#000";
          }
        });

        box.appendChild(input);
        box.appendChild(label);
        row.appendChild(box);
      });
    }
  </script>
</body>
</html>
